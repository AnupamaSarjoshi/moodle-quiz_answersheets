define(["jquery","core/modal_factory","core/modal_events","core/notification"],function(a,b,c,d){var e={SELECTOR:{SUBMIT_RESPONSES_BUTTON:".submit-responses",RESPONSE_FORM:"#responseform"},init:function(f){var g=a(e.SELECTOR.SUBMIT_RESPONSES_BUTTON),h=a(e.SELECTOR.RESPONSE_FORM);g.click(function(a){a.preventDefault(),g.attr("disabled","disabled"),b.create({type:b.types.SAVE_CANCEL,title:f.title,body:f.body}).then(function(a){return a.show(),a.getRoot().on(c.save,function(a){a.preventDefault(),g.removeAttr("disabled"),"undefined"!=typeof M.core_formchangechecker&&M.core_formchangechecker.set_form_submitted(),h.submit()}),a.getRoot().on(c.hidden,function(){a.destroy(),g.removeAttr("disabled")}),a}).fail(function(a){d.exception(a),g.removeAttr("disabled")})})}};return e});